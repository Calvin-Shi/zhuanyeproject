{% extends 'base.html' %}

{% block title %}我的推荐 - 电影推荐系统{% endblock %}

{% block content %}
<section class="recommendations-header">
    <h1>为你推荐</h1>
    <p>基于你的喜好，为你精选以下电影</p>
</section>

{% if error %}
    <div class="error-message">
        <p>{{ error }}</p>
        <a href="{% url 'movie_frontend:movie_list' %}" class="btn primary-btn">去评分电影</a>
    </div>
{% else %}
    <div class="movie-grid">
        {% for movie in movies %}
            <div class="movie-card">
                <div class="movie-title">
                    <a href="{% url 'movie_frontend:movie_detail' movie.id %}">
                        {{ movie.display_title }}
                    </a>
                </div>
                <div class="movie-info">
                    <span class="release-year">{{ movie.release_year }}</span>
                    <div class="genres">
                        {% for genre in movie.genres.all|slice:":2" %}
                            <span class="genre-tag">{{ genre.name }}</span>
                        {% endfor %}
                        {% if movie.genres.all.count > 2 %}
                            <span class="genre-tag">+{{ movie.genres.all.count|add:"-2" }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% empty %}
            <p class="no-movies">暂无推荐电影</p>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}