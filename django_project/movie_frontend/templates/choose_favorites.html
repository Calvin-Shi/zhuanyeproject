{% extends 'base.html' %}
{% block title %}选择你喜欢的电影{% endblock %}
{% block content %}
<h1>选择你喜欢的电影</h1>
<form method="post">
  {% csrf_token %}
  <div class="movie-grid">
    {% for movie in movies %}
      <label class="movie-card" style="cursor:pointer">
        <input type="checkbox" name="favorites" value="{{ movie.id }}" {% if movie.id in fav_ids %}checked{% endif %} style="position:absolute; transform:scale(1.3); margin:8px;">
        <div class="movie-title" style="padding-left:28px;">{{ movie.display_title }}</div>
        <div class="movie-meta">
          <div class="genres">
            {% for genre in movie.genres.all|slice:':2' %}
              <span class="genre-tag">{{ genre.name }}</span>
            {% endfor %}
          </div>
        </div>
      </label>
    {% empty %}
      <p>暂无电影数据。</p>
    {% endfor %}
  </div>
  <div class="actions" style="margin-top:16px; text-align:right;">
    <button type="submit" class="btn primary-btn">提交喜好</button>
  </div>
</form>
{% endblock %}
